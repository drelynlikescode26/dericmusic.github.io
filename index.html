<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deric Music — Official Site</title>
    <meta property="og:title" content="Deric Music — Official Site">
    <meta name="twitter:title" content="Deric Music — Official Site">
    <meta property="og:description" content="Producer // Artist // Visionary">
    <meta name="twitter:description" content="Producer // Artist // Visionary">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="hero.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="hero-bg"></div>
    <div class="grain-overlay"></div>
    <button class="minimal-mode-toggle" id="minimalToggle" title="Toggle Minimal Mode (M)">◐</button>
    <div class="hud-panel">
        <div class="artist-block">
            <h1>DERIC</h1>
        </div>
        <div class="hud-links">
            <a href="https://open.spotify.com/artist/08nIFJLOyYWc5eWJCa4S8X" class="music-link spotify" title="Spotify" target="_blank" rel="noopener"><i class="fab fa-spotify"></i></a>
            <a href="https://music.apple.com/us/artist/deric/1529542054" class="music-link apple" title="Apple Music" target="_blank" rel="noopener"><i class="fab fa-apple"></i></a>
            <a href="https://on.soundcloud.com/Sp7ba1spJzejJtwVZi" class="music-link soundcloud" title="SoundCloud" target="_blank" rel="noopener"><i class="fab fa-soundcloud"></i></a>
            <a href="https://www.instagram.com/envyderic/" class="music-link instagram" title="Instagram" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@ihatederic" class="music-link tiktok" title="TikTok" target="_blank" rel="noopener"><i class="fab fa-tiktok"></i></a>
            <a href="https://youtube.com/@envyderic" class="music-link youtube" title="YouTube" target="_blank" rel="noopener"><i class="fab fa-youtube"></i></a>
        </div>
        <div class="spotify-toggle-wrap">
            <button class="spotify-toggle-btn" id="spotifyToggleBtn">Listen</button>
            <div class="spotify-dropdown" id="spotifyDropdown">
                <iframe data-testid="embed-iframe" src="https://open.spotify.com/embed/artist/08nIFJLOyYWc5eWJCa4S8X?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
            </div>
        </div>
        <form class="email-capture" id="emailForm">
            <input type="email" placeholder="Stay tapped in." required id="emailInput">
            <button type="submit">→</button>
        </form>
    </div>
        <script>
        // Spotify dropdown logic
        const btn = document.getElementById('spotifyToggleBtn');
        const dropdown = document.getElementById('spotifyDropdown');
        let open = false;
        function closeDropdown() {
            dropdown.classList.remove('open');
            open = false;
        }
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            open = !open;
            dropdown.classList.toggle('open', open);
        });
        document.addEventListener('click', function(e) {
            if (open && !dropdown.contains(e.target) && e.target !== btn) closeDropdown();
        });
        document.addEventListener('keydown', function(e) {
            if (open && (e.key === 'Escape' || e.key === 'Esc')) closeDropdown();
        });
        // Mobile: adjust height
        function adjustSpotifyHeight() {
            if (window.innerWidth < 600) {
                dropdown.querySelector('iframe').style.height = '220px';
            } else {
                dropdown.querySelector('iframe').style.height = '352px';
            }
        }
        window.addEventListener('resize', adjustSpotifyHeight);
        adjustSpotifyHeight();
        
        // Subtle parallax on hero image
        const heroBg = document.querySelector('.hero-bg');
        let ticking = false;
        window.addEventListener('scroll', function() {
          if (!ticking) {
            window.requestAnimationFrame(function() {
              const scrolled = window.pageYOffset;
              const parallax = scrolled * 0.15; // Very subtle movement
              if (heroBg) {
                heroBg.style.transform = `translateY(${parallax}px) scale(1.02)`;
              }
              ticking = false;
            });
            ticking = true;
          }
        });
        </script>
    </div>

    <script>
    // Minimal mode toggle for clean screenshots/sharing
    const toggleBtn = document.getElementById('minimalToggle');
    const hudPanel = document.querySelector('.hud-panel');
    const spotifyWrap = document.querySelector('.spotify-toggle-wrap');
    let minimalMode = localStorage.getItem('minimalMode') === 'true';
    
    function applyMinimalMode(minimal) {
      minimalMode = minimal;
      localStorage.setItem('minimalMode', minimal);
      if (minimal) {
        hudPanel.classList.add('minimal-hidden');
        if (spotifyWrap) spotifyWrap.classList.add('minimal-hidden');
        toggleBtn.classList.add('active');
      } else {
        hudPanel.classList.remove('minimal-hidden');
        if (spotifyWrap) spotifyWrap.classList.remove('minimal-hidden');
        toggleBtn.classList.remove('active');
      }
    }
    
    // Apply saved state
    applyMinimalMode(minimalMode);
    
    // Toggle button click
    toggleBtn.addEventListener('click', function(e) {
      e.stopPropagation();
      applyMinimalMode(!minimalMode);
    });
    
    // Keyboard shortcut: M key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'm' || e.key === 'M') {
        applyMinimalMode(!minimalMode);
      }
    });
    
    // Email capture form
    const emailForm = document.getElementById('emailForm');
    const emailInput = document.getElementById('emailInput');
    emailForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const email = emailInput.value.trim();
      if (email) {
        // Store email (you can later integrate with Mailchimp, ConvertKit, etc.)
        console.log('Email captured:', email);
        // Show success feedback
        emailInput.value = '';
        emailInput.placeholder = 'You\'re in. ✓';
        setTimeout(function() {
          emailInput.placeholder = 'Stay tapped in.';
        }, 3000);
        // TODO: Send to your email service (Mailchimp, ConvertKit, etc.)
      }
    });
    </script>

    <script>
    (function(){
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if(prefersReduced){
            document.querySelectorAll('.reveal').forEach(el => el.classList.add('visible'));
            return;
        }
        const obs = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if(entry.isIntersecting){
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.15, rootMargin: '0px 0px -10% 0px' });
        document.querySelectorAll('.reveal').forEach(el => obs.observe(el));
    })();
    </script>

</body>
</html>
